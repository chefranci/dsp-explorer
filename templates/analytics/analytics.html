<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ settings.GOOGLE_ANALYTICS_CODE }}" charset=utf-8"></script>
<script charset=utf-8">

    // window.dataLayer = window.dataLayer || [];
    // console.log('window.dataLayer', window.dataLayer);
    //
    // function gtag(){dataLayer.push(arguments)};
    //
    // gtag('js', new Date());
    // gtag('config', '{{ settings.GOOGLE_ANALYTICS_CODE }}',
    //     {'userId': '{% if user.is_authenticated %}  user.profile.crm_id  {% else %}} USER_ID {% endif %}'},
    //     {'user_id': '{% if user.is_authenticated %}  user.profile.crm_id  {% else %}} USER_ID {% endif %}'},
    //     {'custom_map': {
    //             'dimension1': 'crm_id',
    //             'dimension2' : 'user_id'
    //         }
    //     }
    // );
    //
    // {% if user.is_authenticated %}
    //     gtag('event', 'crm_id_dimension', '{{ user.profile.crm_id }}');
    //     gtag('event', 'user_id_dimension', '{{ user.id }}');
    // {% endif %}


    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', '{{ settings.GOOGLE_ANALYTICS_CODE }}', 'auto');
    ga('set', 'userId', '{{ user.profile.crm_id }}' );
    ga('send', 'pageview');

</script>



</script>

